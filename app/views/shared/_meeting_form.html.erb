<div class="row justify-content-center">
  <div
    class="col-lg-6 p-5 m-5 shadow"
    data-controller="game-select poi-autocomplete players-max steps"
    data-poi-autocomplete-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
    <div class="image-container d-flex justify-content-center align-items-center">
      <h1 class="d-flex justify-content-center annonce-titre mb-4">CrÃ©e ton annonce ! ðŸ˜Ž</h1>
      <a href="/meetings" class="btn-close close-button-meeting-form" aria-label="Close"></a>
    </div>
    <%= simple_form_for @meeting do |f| %>

      <div class="game-info" data-steps-target="step">
        <%= f.input :game_id,
                    label: "CommenÃ§ons par le jeu",
                    input_html: {id: "input-tags", placeholder: "ContrÃ©e, 7 Wonders", autocomplete: "off"},
                    collection: Game.all
                    %>
        <%= f.input :players_needed_min,
                    placeholder: "1, 2, 3...",
                    label: "De combien de joueurs as-tu besoin (min)?" %>

        <div class="form-check form-switch mb-4">
          <input class="form-check-input" type="checkbox" id="flexSwitchCheckDefault" data-action="click->players-max#reveal">
          <label class="form-check-label text-muted" for="flexSwitchCheckDefault">Donner une fourchette, ex: entre 2 et 5 participants</label>
        </div>

        <%= f.input :players_needed_max,
                    placeholder: "1, 2, 3...",
                    label: "Et au max ?",
                    wrapper_html: {data: {players_max_target: "field" }, class: "d-none"}
                    %>
            <%= button_tag "Next", type: :button,
                  data: {
                    action: "click->steps#goToNext",
                    next_step: "1"
                  } %>
      </div>

      <div class="meeting-info step d-none" data-steps-target="step">

        <h3> PrÃ©cise les modalitÃ©s du rendez-vous </h3>
        <%= f.input :location_type,
                    placeholder: "CafÃ©, Bar, Parc, A domicile ...",
                    label: "Dans quel type de lieu veux-tu jouer?",
                    collection: ["Parc", "CafÃ© / Bar", "A domicile", "A dÃ©finir"]%>

        <div data-poi-autocomplete-target="searchBox" class="mb-3"></div>
        <%= f.input :place_name,
                    label: "Quel est le nom de l'Ã©tablissement?",
                    input_html: { data: { poi_autocomplete_target: "name" }} %>
        <%= f.input :place_address,
                    label: "Et son adresse ?",
                    input_html: { data: { poi_autocomplete_target: "address" }} %>
        <%= f.input :date,
                    as: :string,
                    label: "A quelle date aura lieu le rendez-vous ?",
                    input_html: { data: { controller: "datetime-selector" } }%>

        <%= button_tag "Previous", type: :button,
              data: {
                action: "click->steps#goToPrevious",
                previous_step: "0"
              } %>

        <%= button_tag "Next", type: :button,
              data: {
                action: "click->steps#goToNext",
                next_step: "2"
              } %>

      </div>

      <div class="title-and-desc d-none" data-steps-target="step">
        <h3>Donne un titre Ã  ton annonce</h3>
        <%= f.input :title,
                  placeholder: "Titre de ton annonce",
                  label: "Titre" %>
        <%= f.input :description,
                  placeholder: "(Optionnel) Ajouter une description..."
                  %>
        <%= button_tag "Previous", type: :button,
              data: {
                action: "click->steps#goToPrevious",
                previous_step: "1"
              } %>

        <%= button_tag "Next", type: :button,
              data: {
                action: "click->steps#goToNext",
                next_step: "3"
              } %>
      </div>

      <div class="less-important-fields d-none" data-steps-target="step">
        <%= f.input :tags,
                    label: "Indique quelques mots-clÃ©s pour faciliter la recherche",
                    input_html: {id: "filter-tags", placeholder: "Cartes, stratÃ©gie, ambiance", autocomplete: "off"}
                    %>
        <%= f.input :level,
                    placeholder: "DÃ©butant, confirmÃ©, expert ?",
                    collection: ["DÃ©butant", "Normal", "Expert", "Pas de restriction"],
                    label: "Quel niveau souhaites-tu donner Ã  ta rencontre ?" %>
        <%= button_tag "Previous", type: :button,
              data: {
                action: "click->steps#goToPrevious",
                previous_step: "2"
              } %>
        <div class="text-center pt-3">
          <%= f.button :submit,"CREER L'ANNONCE", class: "btn btn-primary " %>
          <%= link_to "ANNULER", meetings_path, class: "btn btn-danger text-white" %>
        </div>
      </div>
    <% end %>
  </div>
</div>